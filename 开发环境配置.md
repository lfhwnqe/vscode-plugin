# VSCodeæ’ä»¶å¼€å‘ç¯å¢ƒé…ç½®æŒ‡å—

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒå‡†å¤‡

### 1. å¿…éœ€è½¯ä»¶å®‰è£…

#### Node.js å’Œ npm/yarn
```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬ï¼ˆæ¨èv16+ï¼‰
node --version

# æ£€æŸ¥npmç‰ˆæœ¬
npm --version

# å®‰è£…yarnï¼ˆæ¨èä½¿ç”¨yarnä½œä¸ºåŒ…ç®¡ç†å™¨ï¼‰
npm install -g yarn

# éªŒè¯yarnå®‰è£…
yarn --version
```

#### VSCode
- ä¸‹è½½å¹¶å®‰è£…æœ€æ–°ç‰ˆæœ¬çš„VSCode
- ç¡®ä¿ç‰ˆæœ¬ >= 1.101.0

### 2. VSCodeæ‰©å±•å®‰è£…

åœ¨VSCodeä¸­å®‰è£…ä»¥ä¸‹æ¨èæ‰©å±•ï¼š

```json
{
  "recommendations": [
    "ms-vscode.vscode-typescript-next",
    "dbaeumer.vscode-eslint",
    "ms-vscode.vscode-json",
    "ms-vscode.extension-test-runner"
  ]
}
```

è¿™äº›æ‰©å±•å·²ç»åœ¨`.vscode/extensions.json`ä¸­é…ç½®ï¼ŒVSCodeä¼šè‡ªåŠ¨æç¤ºå®‰è£…ã€‚

## ğŸ”§ é¡¹ç›®é…ç½®è¯¦è§£

### 1. TypeScripté…ç½® (tsconfig.json)

```json
{
  "compilerOptions": {
    "module": "Node16",           // æ¨¡å—ç³»ç»Ÿ
    "target": "ES2022",          // ç¼–è¯‘ç›®æ ‡
    "outDir": "out",             // è¾“å‡ºç›®å½•
    "lib": ["ES2022"],           // åº“æ–‡ä»¶
    "sourceMap": true,           // ç”Ÿæˆæºæ˜ å°„
    "rootDir": "src",            // æºç æ ¹ç›®å½•
    "strict": true               // ä¸¥æ ¼æ¨¡å¼
  },
  "exclude": ["node_modules", ".vscode-test"]
}
```

### 2. Webpacké…ç½® (webpack.config.js)

Webpackç”¨äºæ‰“åŒ…æ’ä»¶ï¼Œä¸»è¦é…ç½®ï¼š

- **å…¥å£æ–‡ä»¶**: `src/extension.ts`
- **è¾“å‡ºæ–‡ä»¶**: `dist/extension.js`
- **ç›®æ ‡ç¯å¢ƒ**: `node` (VSCodeæ‰©å±•è¿è¡Œåœ¨Node.jsç¯å¢ƒ)
- **å¤–éƒ¨ä¾èµ–**: `vscode` (ç”±VSCodeæä¾›ï¼Œä¸éœ€è¦æ‰“åŒ…)

### 3. ESLinté…ç½® (eslint.config.mjs)

ä»£ç è´¨é‡æ£€æŸ¥é…ç½®ï¼š
- TypeScriptæ”¯æŒ
- æ¨èçš„ä»£ç é£æ ¼è§„åˆ™
- VSCodeé›†æˆ

## ğŸš€ å¼€å‘å·¥ä½œæµ

### 1. æ—¥å¸¸å¼€å‘æµç¨‹

```bash
# 1. å¯åŠ¨ç›‘å¬æ¨¡å¼ï¼ˆè‡ªåŠ¨ç¼–è¯‘ï¼‰
yarn watch

# 2. åœ¨å¦ä¸€ä¸ªç»ˆç«¯å¯åŠ¨è°ƒè¯•
# åœ¨VSCodeä¸­æŒ‰F5ï¼Œæˆ–ä½¿ç”¨"è¿è¡Œå’Œè°ƒè¯•"é¢æ¿

# 3. åœ¨æ‰©å±•å¼€å‘ä¸»æœºä¸­æµ‹è¯•åŠŸèƒ½

# 4. ä¿®æ”¹ä»£ç åï¼Œé‡æ–°åŠ è½½æ‰©å±•
# åœ¨æ‰©å±•å¼€å‘ä¸»æœºä¸­æŒ‰ Ctrl+R (Mac: Cmd+R)
```

### 2. è°ƒè¯•é…ç½® (.vscode/launch.json)

```json
{
  "version": "0.2.0",
  "configurations": [
    {
      "name": "Run Extension",
      "type": "extensionHost",
      "request": "launch",
      "args": [
        "--extensionDevelopmentPath=${workspaceFolder}"
      ],
      "outFiles": [
        "${workspaceFolder}/dist/**/*.js"
      ],
      "preLaunchTask": "${workspaceFolder}/npm: watch"
    }
  ]
}
```

### 3. ä»»åŠ¡é…ç½® (.vscode/tasks.json)

```json
{
  "version": "2.0.0",
  "tasks": [
    {
      "type": "npm",
      "script": "watch",
      "problemMatcher": "$tsc-watch",
      "isBackground": true,
      "presentation": {
        "reveal": "never"
      },
      "group": {
        "kind": "build",
        "isDefault": true
      }
    }
  ]
}
```

## ğŸ” è°ƒè¯•æŠ€å·§

### 1. æ§åˆ¶å°è°ƒè¯•

```typescript
// åœ¨ä»£ç ä¸­æ·»åŠ è°ƒè¯•è¾“å‡º
console.log('è°ƒè¯•ä¿¡æ¯:', variable);
console.error('é”™è¯¯ä¿¡æ¯:', error);

// åœ¨æ‰©å±•å¼€å‘ä¸»æœºä¸­æŸ¥çœ‹è¾“å‡ºï¼š
// å¸®åŠ© > åˆ‡æ¢å¼€å‘è€…å·¥å…· > Consoleæ ‡ç­¾
```

### 2. æ–­ç‚¹è°ƒè¯•

1. åœ¨ä»£ç ä¸­è®¾ç½®æ–­ç‚¹ï¼ˆç‚¹å‡»è¡Œå·å·¦ä¾§ï¼‰
2. æŒ‰F5å¯åŠ¨è°ƒè¯•
3. è§¦å‘ç›¸åº”çš„å‘½ä»¤
4. åœ¨æ–­ç‚¹å¤„æ£€æŸ¥å˜é‡å€¼

### 3. æ—¥å¿—è¾“å‡º

```typescript
// ä½¿ç”¨VSCodeçš„è¾“å‡ºé€šé“
const outputChannel = vscode.window.createOutputChannel('å­¦ä¹ æ’ä»¶');
outputChannel.appendLine('è¿™æ˜¯ä¸€æ¡æ—¥å¿—æ¶ˆæ¯');
outputChannel.show(); // æ˜¾ç¤ºè¾“å‡ºé¢æ¿
```

## ğŸ“¦ æ‰“åŒ…å’Œå‘å¸ƒ

### 1. å®‰è£…vsceå·¥å…·

```bash
# å®‰è£…VSCodeæ‰©å±•æ‰“åŒ…å·¥å…·
npm install -g @vscode/vsce
```

### 2. æ‰“åŒ…æ‰©å±•

```bash
# åˆ›å»º.vsixæ–‡ä»¶
vsce package

# æŒ‡å®šç‰ˆæœ¬å·
vsce package --version 1.0.0
```

### 3. æœ¬åœ°å®‰è£…æµ‹è¯•

```bash
# å®‰è£…æ‰“åŒ…å¥½çš„æ‰©å±•
code --install-extension your-extension-1.0.0.vsix
```

## âš¡ æ€§èƒ½ä¼˜åŒ–

### 1. å»¶è¿Ÿæ¿€æ´»

```json
// package.jsonä¸­é…ç½®æ¿€æ´»äº‹ä»¶
"activationEvents": [
  "onCommand:your-extension.command"
]
```

### 2. èµ„æºæ¸…ç†

```typescript
export function deactivate() {
  // æ¸…ç†å®šæ—¶å™¨
  if (timer) {
    clearInterval(timer);
  }
  
  // å…³é—­æ–‡ä»¶ç›‘å¬
  if (watcher) {
    watcher.dispose();
  }
}
```

### 3. å¼‚æ­¥æ“ä½œ

```typescript
// ä½¿ç”¨å¼‚æ­¥å‡½æ•°é¿å…é˜»å¡UI
const command = vscode.commands.registerCommand('cmd', async () => {
  try {
    const result = await someAsyncOperation();
    vscode.window.showInformationMessage(`ç»“æœ: ${result}`);
  } catch (error) {
    vscode.window.showErrorMessage(`é”™è¯¯: ${error.message}`);
  }
});
```

## ğŸ§ª æµ‹è¯•é…ç½®

### 1. å•å…ƒæµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•
yarn test

# ç›‘å¬æ¨¡å¼è¿è¡Œæµ‹è¯•
yarn test --watch
```

### 2. æµ‹è¯•æ–‡ä»¶ç»“æ„

```
src/test/
â”œâ”€â”€ extension.test.ts    # æ‰©å±•åŠŸèƒ½æµ‹è¯•
â”œâ”€â”€ suite/
â”‚   â””â”€â”€ index.ts        # æµ‹è¯•å¥—ä»¶é…ç½®
â””â”€â”€ runTest.ts          # æµ‹è¯•è¿è¡Œå™¨
```

## ğŸ”§ å¸¸è§é—®é¢˜è§£å†³

### 1. ç¼–è¯‘é”™è¯¯

```bash
# æ¸…ç†å¹¶é‡æ–°å®‰è£…ä¾èµ–
rm -rf node_modules yarn.lock
yarn install

# é‡æ–°ç¼–è¯‘
yarn compile
```

### 2. è°ƒè¯•æ— æ³•å¯åŠ¨

- æ£€æŸ¥launch.jsoné…ç½®
- ç¡®ä¿preLaunchTaskæ­£ç¡®
- éªŒè¯outFilesè·¯å¾„

### 3. æ‰©å±•æ— æ³•åŠ è½½

- æ£€æŸ¥package.jsonè¯­æ³•
- éªŒè¯mainå­—æ®µè·¯å¾„
- ç¡®ä¿activationEventsé…ç½®æ­£ç¡®

---

ğŸ’¡ **æç¤º**: å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°é—®é¢˜æ—¶ï¼Œå¯ä»¥æŸ¥çœ‹VSCodeçš„"å¼€å‘è€…å·¥å…·"æ§åˆ¶å°è·å–è¯¦ç»†é”™è¯¯ä¿¡æ¯ã€‚
